<!doctype html><html><head><meta charset="utf-8"><title>Architecture</title><link rel="stylesheet" href="styles.css"></head><body>
<header class="container"><h1>Architecture & Data Flow</h1></header>
<div class="layout container">
<aside class="sidebar"><h3>Components</h3><ul><li>Dashboard (Flask)</li><li>Worker (RQ)</li><li>LLM Adapter</li><li>Redis DLQ</li><li>Prometheus/Grafana</li></ul></aside>
<main class="content">
<section class="card"><h2>High-level Overview</h2>
<p>User → Dashboard UI → /api/submit_task → enqueue (RQ/Redis) → worker → ai/adapter → result → UI + metrics</p>
</section>
<section class="card"><h2>Observability</h2>
<p>Prometheus metrics exposed at <code>/metrics</code>. Key metrics:</p>
<ul><li><code>ai_chat_requests_total</code></li><li><code>ai_chat_errors_total</code></li><li><code>ai_tasks_dlq_depth</code></li><li><code>ai_llm_cost_total</code></li></ul>
</section>
<section class="card"><h2>Security boundaries</h2>
<ul><li>Secrets in <code>/etc/ai-agent/env</code> (600)</li><li>Protect <code>/metrics</code> via nginx allow list</li><li>Admin endpoints protected via API key & session</li></ul>
</section>
</main></div><footer class="footer">Architecture guidance — see Developer Guide to extend components.</footer><script src="scripts.js"></script></body></html>
